<!DOCTYPE html>
<html lang="en" data-theme="system">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>FitTrack</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
  <meta name="color-scheme" content="light dark">
</head>
<body>
  <!-- Header -->
  <header class="app-header">
    <div class="header-left">
      <span class="material-icons-outlined brand-icon">favorite</span>
      <h1 class="brand">FitTrack</h1>
    </div>
    <button class="icon-btn" id="quickSettingsBtn" aria-label="Open settings">
      <span class="material-icons-outlined">settings</span>
    </button>
  </header>

  <!-- Tabs -->
  <main>
    <!-- TASKS (Top of Home feel) -->
    <section id="tab-home" class="tab active" role="region" aria-labelledby="nav-home">
      <div class="section-title">
        <h2>Today</h2>
      </div>

      <!-- Tasks widget -->
      <article class="card">
        <div class="card-header">
          <h3>Tasks</h3>
          <div class="card-actions">
            <button class="chip" id="resetTodayBtn" title="Reset today's checkmarks">Reset Today</button>
            <button class="icon-btn" id="gotoTasks" title="Manage tasks">
              <span class="material-icons-outlined">tune</span>
            </button>
          </div>
        </div>
        <ul id="homeTaskList" class="list list-tasks"></ul>
        <div class="row gap">
          <input id="homeNewTaskInput" class="input" type="text" placeholder="Add a quick task…" />
          <button id="homeAddTaskBtn" class="btn">Add</button>
        </div>
      </article>

      <!-- Calories widget -->
      <article class="card">
        <div class="card-header">
          <h3>Calories</h3>
          <div class="muted small" id="calRemaining"></div>
        </div>
        <div class="ring-wrap">
          <canvas id="calorieRing" width="180" height="180" aria-label="Calorie progress"></canvas>
          <div class="ring-center">
            <div class="ring-primary"><span id="calTotal">0</span> / <span id="calGoal">3000</span></div>
            <div class="ring-sub">kcal</div>
          </div>
        </div>
        <button id="openMealSheetFromHome" class="btn outline">Add Meal</button>
      </article>

      <!-- Protein widget -->
      <article class="card">
        <div class="card-header">
          <h3>Protein</h3>
          <div class="muted small" id="proRemaining"></div>
        </div>
        <div class="ring-wrap">
          <canvas id="proteinRing" width="180" height="180" aria-label="Protein progress"></canvas>
          <div class="ring-center">
            <div class="ring-primary"><span id="proTotal">0</span> / <span id="proGoal">150</span></div>
            <div class="ring-sub">grams</div>
          </div>
        </div>
      </article>
    </section>

    <!-- TASKS (management) -->
    <section id="tab-tasks" class="tab" role="region" aria-labelledby="nav-tasks">
      <div class="section-title">
        <h2>Tasks</h2>
        <div class="muted small">Tap to toggle • Edit with ✏️ • Reorder ↑↓</div>
      </div>

      <article class="card">
        <ul id="taskList" class="list list-tasks"></ul>

        <div class="row gap">
          <input id="newTaskInput" class="input" type="text" placeholder="New task (e.g., 10k steps)" />
          <button id="addTaskBtn" class="btn">Add</button>
        </div>
        <div class="row gap wrap">
          <button id="restoreDefaultsBtn" class="chip">Restore Defaults</button>
          <button id="resetCompletionsBtn" class="chip">Reset Today</button>
        </div>
      </article>
    </section>

    <!-- CALORIES -->
    <section id="tab-calories" class="tab" role="region" aria-labelledby="nav-calories">
      <div class="section-title">
        <h2>Meals</h2>
        <div class="muted small">Log your intake to fill the rings</div>
      </div>

      <article class="card">
        <div class="row">
          <button id="openMealSheet" class="btn">Add Meal</button>
          <button id="clearMealsBtn" class="btn danger outline">Clear Meals</button>
        </div>
        <ul id="mealList" class="list list-meals"></ul>
      </article>
    </section>

    <!-- SETTINGS -->
    <section id="tab-settings" class="tab" role="region" aria-labelledby="nav-settings">
      <div class="section-title"><h2>Settings</h2></div>
      <article class="card">
        <div class="field">
          <label for="calorieGoalInput">Daily Calorie Goal (1000–6000)</label>
          <div class="row align-center gap">
            <input id="calorieGoalInput" type="range" min="1000" max="6000" step="50" />
            <output id="calorieGoalOut">3000</output>
          </div>
        </div>
        <div class="field">
          <label for="proteinGoalInput">Daily Protein Goal (50–400 g)</label>
          <div class="row align-center gap">
            <input id="proteinGoalInput" type="range" min="50" max="400" step="5" />
            <output id="proteinGoalOut">150</output>
          </div>
        </div>

        <div class="divider"></div>

        <h3>Default Tasks</h3>
        <ul id="settingsTaskList" class="list list-plain"></ul>
        <div class="row gap">
          <input id="newDefaultTaskInput" class="input" type="text" placeholder="Add default task" />
          <button id="addDefaultTaskBtn" class="btn">Add</button>
        </div>

        <div class="divider"></div>

        <div class="field">
          <label>Theme</label>
          <div class="row gap wrap">
            <button class="chip" data-theme="system">System</button>
            <button class="chip" data-theme="light">Light</button>
            <button class="chip" data-theme="dark">Dark</button>
          </div>
        </div>

        <div class="divider"></div>

        <div class="row gap wrap">
          <button id="saveSettingsBtn" class="btn">Save Settings</button>
          <button id="resetAllBtn" class="btn danger outline">Reset All Data</button>
        </div>
      </article>
    </section>
  </main>

  <!-- Bottom nav -->
  <nav class="navbar" role="tablist">
    <button id="nav-tasks" class="nav-btn" data-tab="tab-tasks">
      <span class="material-icons-outlined">checklist</span>
      <span>Tasks</span>
    </button>
    <button id="nav-home" class="nav-btn active" data-tab="tab-home">
      <span class="material-icons-outlined">home</span>
      <span>Home</span>
    </button>
    <button id="nav-calories" class="nav-btn" data-tab="tab-calories">
      <span class="material-icons-outlined">restaurant</span>
      <span>Calories</span>
    </button>
    <button id="nav-settings" class="nav-btn" data-tab="tab-settings">
      <span class="material-icons-outlined">settings</span>
      <span>Settings</span>
    </button>
  </nav>

  <!-- Add Meal Bottom Sheet -->
  <div id="sheet" class="sheet" aria-hidden="true" role="dialog" aria-label="Add meal">
    <div class="sheet-backdrop"></div>
    <div class="sheet-panel">
      <div class="sheet-grabber"></div>
      <h3>Add Meal</h3>
      <div class="field">
        <label for="mealName">Name (optional)</label>
        <input id="mealName" class="input" type="text" placeholder="e.g., Chicken bowl" />
      </div>
      <div class="row gap">
        <div class="field grow">
          <label for="mealCalories">Calories</label>
          <input id="mealCalories" class="input" type="number" inputmode="numeric" placeholder="e.g., 550" />
        </div>
        <div class="field grow">
          <label for="mealProtein">Protein (g)</label>
          <input id="mealProtein" class="input" type="number" inputmode="numeric" placeholder="e.g., 35" />
        </div>
      </div>
      <div class="row gap wrap">
        <button id="addMealBtn" class="btn">Add</button>
        <button id="closeSheetBtn" class="btn outline">Close</button>
      </div>
    </div>
  </div>

  <!-- Toasts -->
  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script src="script.js"></script>
</body>
</html>
